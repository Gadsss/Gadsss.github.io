<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title id="bt">百宝箱</title>
</head>

<body>
    <div style="background-color: rgb(88, 88, 81);text-align: center;">
        <p id="time" style="background-color: bisque;">
            <noscript>
                抱歉，你的浏览器不支持脚本程序。
            </noscript>
        </p>
        <p id="times" style="background-color: bisque; "></p>
    </div>

    <div style="width:330px; background-color: rgba(233, 221, 59, 0.76);float: left;text-align: center;">
        <h1 style="text-align: center;">计时器</h1>
        <div style="background-color:rgb(166, 226, 27);">
            <p>
                <br>
                按这个👇按钮开始<br>
                <button onclick="clearClock()"
                    style="height: 30px;background-color: rgba(245, 230, 30, 0.966);">清空</button>
                <button onclick="startClock()"
                    style="height: 30px;background-color: rgba(245, 230, 30, 0.966);">开始计时</button>
                <button onclick="pauseClock()"
                    style="height: 30px;background-color: rgba(245, 230, 30, 0.966);">暂停</button>
                <br><br>
            </p>
        </div>
        <p>
            <strong id="m1">0</strong><strong id="m2">0</strong><strong>:</strong><strong id="s1">0</strong><strong
                id="s2">0</strong>
        </p>
    </div>

    <div style="float: left;width:330px;background-color: rgb(117, 117, 105);">
        <h1 style="text-align: center;">备忘录</h1>
        <div style="background-color: darkgrey;text-align: center;">
            <input type="text" name="inputNote" id="jiShiBen">
            <button style="height: 30px;background-color: grey;" onclick="Notes()">记录</button>
            <button style="height: 30px;background-color: grey;" onclick="showNotes()">展示</button>
        </div>
        <div>
            <p id="jsbXx"></p>
        </div>
    </div>

    <div style="float: left;width:330px;background-color: rgba(204, 207, 39, 0.288);">
        <h1 style="text-align: center;">小树林</h1>
        <div style="text-align: center;background-color:darkgrey;">
            金钱：<strong id="gold">0</strong>
        </div>
        <div style="text-align: center;">
            <p>这是一个神秘的小树林……
                <button style="height: 30px;background-color: rgb(245, 231, 30);" onclick="Tansuo()">探索</button>
            </p>
            <p id="tsxx">探索信息</p>
        </div>
    </div>
</body>

<script>
    //时间
    var autoTimeShower = setInterval(function () { showTime() }, 1000);
    function showTime() {
        var time = Date().toString().split(' ');
        document.getElementById("time").innerHTML = time[3] + "/" + time[1] + "/" + time[2] + " " + time[4];
    }
    //记录网页打开次数
    if (!localStorage.times) { localStorage.times = 1 } else { localStorage.times++ }
    document.getElementById("times").innerHTML = "你累计已经打开了百宝箱" + localStorage.times + "次";
    //改变网页标题
    var changeTitle = setInterval(function () { gaiBianBiaoTi() }, 3000)
    var i = 2;
    function gaiBianBiaoTi() {
        if (i == 1) { document.getElementById("bt").innerText = "百宝箱"; i = 2 }
        else { document.getElementById("bt").innerText = "Made By Gadsss"; i = 1 }
    }
    //可暂停的计时器，只能计一小时以内
    var stc = "";//防止多次调用
    function startClock() { if (stc == "") { stc = setInterval(function () { Increasing() }, 1000); } }
    var a = 0, b = 0, c = 0, d = 0;
    function Increasing() {
        a++;
        if (a == 10) { if (d == 5 && c == 9 && b == 5) { a = 0; b = 0; c = 0; d = 0 } else { a = 0; b++ } }
        if (b == 6) { b = 0; c++ }
        if (c == 10) { c = 0; d++ }
        document.getElementById("s2").innerHTML = a;
        document.getElementById("s1").innerHTML = b;
        document.getElementById("m2").innerHTML = c;
        document.getElementById("m1").innerHTML = d;
    }
    function pauseClock() { clearInterval(stc); stc = ""; }
    function clearClock() {
        a = 0; b = 0; c = 0; d = 0; clearInterval(stc); stc = "";
        document.getElementById("s2").innerHTML = a;
        document.getElementById("s1").innerHTML = b;
        document.getElementById("m2").innerHTML = c;
        document.getElementById("m1").innerHTML = d;
    }
    //探索
    if (!localStorage.gold) { localStorage.gold = 0 } else { document.getElementById("gold").innerHTML = localStorage.gold; }
    function Tansuo() {
        localStorage.gold++;
        document.getElementById("tsxx").innerHTML = "还未设置探索内容，敬请期待……";
        document.getElementById("gold").innerHTML = localStorage.gold;
    }
    //记事本
    if (!localStorage.notes) { localStorage.notes = "" }//防止第一次打开，存档未定义
    function showNotes() {//展示
        var Notes = localStorage.notes.split(',');
        var nn = "<dl>";
        for (let i = 0; i < Notes.length; i++) {
            nn += "<dt>" + Notes[i] + "<button onclick=\"deleteNote(" + i + ")\">删除</button>" + "</dt>"
                + "<dd style=\"width: 260px;\">" + Notes[i + 1] + "</dd>" + "<hr>"; i++;
        }
        nn += "</dl>";
        document.getElementById("jsbXx").innerHTML = nn;
    }
    function Notes() {//记录
        //获取时间和输入信息
        var time = Date().toString().split(' ');
        var newTime = time[3] + "/" + time[1] + "/" + time[2] + " " + time[4];
        var note = document.getElementById("jiShiBen").value;
        //将信息保存起来
        var Notes = localStorage.notes.split(',');//存储所有的记事本内容
        var oneNote = [2]; //临时存储当前的输入
        oneNote[0] = newTime; oneNote[1] = note;
        Notes.push(oneNote[0]); Notes.push(oneNote[1]);//需要一个一个push
        if (Notes.length == 3) { Notes.splice(0, 1); }//因为删除方法最后会保存进本地一个空的
        localStorage.notes = Notes;//存到本地
        //用列表显示有限数量的内容
        var nn = "<dl>";
        for (let i = 0; i < Notes.length; i++) {
            nn += "<dt>" + Notes[i] + "<button onclick=\"deleteNote(" + i + ")\">删除</button>" + "</dt>"
                + "<dd style=\"width: 260px;\">" + Notes[i + 1] + "</dd>" + "<hr>"; i++;
        }
        nn += "</dl>";
        document.getElementById("jsbXx").innerHTML = nn;
        document.getElementById("jiShiBen").value = "";//记录后清理输入框
    }
    function deleteNote(x) {//删除
        var Notes = localStorage.notes.split(',');
        Notes.splice(x, 2);
        localStorage.notes = Notes;
        var nn = "<dl>";
        for (let i = 0; i < Notes.length; i++) {
            nn += "<dt>" + Notes[i] + "<button onclick=\"deleteNote(" + i + ")\">删除</button>" + "</dt>"
                + "<dd style=\"width: 260px;\">" + Notes[i + 1] + "</dd>" + "<hr>"; i++;
        }
        nn += "</dl>";
        document.getElementById("jsbXx").innerHTML = nn;
    }
    /*禁止缩放，iOS，还是会有放大效果，感觉是检测间隔的问题
    window.onload = function () {
        document.addEventListener('touchstart', function (event) {
            if (event.touches.length > 1) {
                event.preventDefault();//多点触控，关闭缩放
            }
        });
        var lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            var now = (new Date()).getTime();
            if (now - lastTouchEnd <= 100) {//调节双击间隔
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        document.addEventListener('gesturestart', function (event) {
            event.preventDefault();
        });
    };*/
</script>

</html>
